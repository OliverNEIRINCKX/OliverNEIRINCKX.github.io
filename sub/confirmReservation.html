<!DOCTYPE html>
<html>
    <p id="reservation"></p>
    <body>
        <p>confirm your reservation</p>
        <form action="payReservation.html">
            <input type="submit" value="Confirm and Pay reservation">
        </form>

        <script>
            function formatUrl() {
                let url = "http://localhost:8080/fillInClientData?"; 

                let searchParams = new URLSearchParams(window.location.search);

                let str = url + searchParams.toString();

                return str;
            }

            function getDataFromLocalStrorage() {
               let roomTypeData= "";
               roomTypeData += localStorage.getItem("name") + "<br>";
               roomTypeData += localStorage.getItem("pricePerNight") + "<br>"; 
               roomTypeData += localStorage.getItem("pricePerGuest") + "<br>"; 
               roomTypeData += localStorage.getItem("totalPrice") + "<br>"; 
               roomTypeData += localStorage.getItem("numberOfRooms") + "<br>";

               return roomTypeData;
            }


            fetch(formatUrl())
            .then(resp => resp.json)
            .then(clientData => {
                let reservation= "";

                reservation+= localStorage.getItem("hotelName") + "<br>";

                for (let x in clientData) {
                    reservation+= clientData[x] + "<br>";
                }

                reservation+=getDataFromLocalStrorage();
                reservation+="<br>";
                return reservation;
            })
            .then(reservation => document.getElementById("reservation").innerHTML = reservation)
            
        </script>
    </body>
</html>